<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="reporteComunicados" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="53c09eb1-a4e3-4ee4-9b23-f5d84f9cf132">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="estado" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="PATH" class="java.lang.String"/>
	<parameter name="ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="nombreusuario" class="java.lang.String"/>
	<parameter name="idusuario" class="java.lang.String"/>
	<parameter name="cat" class="java.lang.String"/>
	<parameter name="autor" class="java.lang.String"/>
	<parameter name="filtro_fecha" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT DISTINCT
        Post.ID,
        (CASE Post.post_title
	WHEN ' ' THEN 'Sin Titulo' ELSE Post.post_title END) AS post_title,
        Post.post_type,
        (CASE Post.post_status
             WHEN 'publish'    THEN 'Publicado'
             WHEN 'pending'    THEN 'Pendiente de revision'
             WHEN 'draft'      THEN 'Borrador'
             WHEN 'cancelado'  THEN 'Cancelado'  END) AS post_status,
        (SELECT DISTINCT  SUBSTRING_INDEX(SUBSTRING_INDEX( meta_value, '"', 2), '"', -1)
        FROM  wp_usermeta
        WHERE user_id = post_author  AND
             (meta_key = 'wp_capabilities' )  ) AS Rol_Autor,
        (SELECT meta_value FROM wp_usermeta WHERE user_id = post_author AND meta_key = 'nickname') alias,
        CONCAT(
        (SELECT meta_value FROM wp_usermeta WHERE user_id = post_author AND meta_key = 'first_name') , ' ',
        (SELECT meta_value FROM wp_usermeta WHERE user_id = post_author AND meta_key = 'last_name') ) nombre,
        date_format(Post.post_date, '%d-%m-%Y %H:%m:%s') AS Fecha_Creacion,
        date_format(Post.post_date_gmt, '%d-%m-%Y %H:%m:%s') AS Fecha_Modificacion
        FROM  wp_posts AS Post, wp_usermeta AS User,
        (SELECT @num:=0) d
        WHERE
        (user_id = post_author) AND
        (post_status != 'trash')              AND
        (post_status != 'auto-draft')         AND
        (post_status != 'inherit')            AND
        (post_type != 'attachment')           AND
        (post_type != 'page')                 AND
        (post_type != 'post')                 AND
        (post_type != 'revision')	     AND
	(post_status LIKE $P{estado})	AND
        	(post_type    LIKE $P{cat}  )	AND
        	(meta_value   like '%'||$P{autor}||'%' )]]>
	</queryString>
	<field name="ID" class="java.math.BigInteger">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="post_title" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="post_type" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="post_status" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Rol_Autor" class="java.lang.String"/>
	<field name="alias" class="java.lang.String"/>
	<field name="nombre" class="java.lang.String"/>
	<field name="Fecha_Creacion" class="java.lang.String"/>
	<field name="Fecha_Modificacion" class="java.lang.String"/>
	<sortField name="Fecha_Creacion" order="Descending"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="142" splitType="Stretch">
			<staticText>
				<reportElement x="184" y="29" width="354" height="29" forecolor="#000000" uuid="34cdff1c-c0ee-4651-92f7-455ff67ceb64"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[REPORTE DE ESTADOS DE COMUNICADOS]]></text>
			</staticText>
			<image onErrorType="Blank">
				<reportElement key="Escudo" x="0" y="0" width="116" height="50" isRemoveLineWhenBlank="true" uuid="2f93745c-119b-4c5f-b210-80bf6a019e2e"/>
				<imageExpression><![CDATA[$P{PATH}+"/SIGOES-Comunicados/includes/img/gob.jpg"]]></imageExpression>
			</image>
			<image onErrorType="Blank">
				<reportElement key="Logo" x="566" y="0" width="186" height="50" isRemoveLineWhenBlank="true" uuid="8e003d9a-ccd8-48f5-b7c3-05a2d3458a3d"/>
				<imageExpression><![CDATA[$P{PATH}+"/SIGOES-Comunicados/includes/img/presidencia.jpg"]]></imageExpression>
			</image>
			<textField pattern="EEE, d MMM yyyy HH:mm:ss ">
				<reportElement x="627" y="58" width="125" height="20" uuid="ef8572bb-c959-4e31-b2fb-8f97851bfbd8"/>
				<textElement verticalAlignment="Top">
					<font size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="544" y="58" width="83" height="20" uuid="62e5a86f-a995-4482-8464-87bc340ecf7c"/>
				<textElement verticalAlignment="Top">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[fecha reporte:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="59" width="103" height="19" uuid="8895ef18-8cbb-4861-980a-7b3b801820fd"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[SIGOES]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="78" width="103" height="20" uuid="d9c613f5-8ead-4cbc-9f28-7212a9a9dce4"/>
				<textElement verticalAlignment="Top"/>
				<text><![CDATA[Generado Por:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="98" width="103" height="20" uuid="0a653c7e-0f81-4bcf-9bf3-2c256f665c07"/>
				<textElement verticalAlignment="Top"/>
				<text><![CDATA[ID Usuario:]]></text>
			</staticText>
			<textField>
				<reportElement x="53" y="118" width="63" height="20" uuid="37423fe0-d08a-4db3-b879-d4a03e9f036e"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement verticalAlignment="Top">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{estado}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="103" y="98" width="211" height="20" uuid="3489c3af-8867-4151-bcfc-4b387e4af118"/>
				<textElement verticalAlignment="Top">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{idusuario}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="103" y="78" width="211" height="20" uuid="11b14c87-8c97-4cec-bc89-4696c14c91bd"/>
				<textElement verticalAlignment="Top">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{nombreusuario}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Opaque" x="0" y="118" width="53" height="20" backcolor="#999999" uuid="b51981ec-a50c-495b-8561-4bee12e3186e"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top"/>
				<text><![CDATA[Estado:]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="116" y="118" width="54" height="20" backcolor="#999999" uuid="38129a67-6aee-4094-964f-b5991eafa401"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top"/>
				<text><![CDATA[Categoria:]]></text>
			</staticText>
			<textField>
				<reportElement x="170" y="118" width="71" height="20" uuid="8f19075e-3694-4420-8000-cc11fdbbc19c"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement verticalAlignment="Top">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{cat}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="314" y="118" width="73" height="20" uuid="c7001791-2ab3-4c51-81bf-b491d5b6bcdb"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement verticalAlignment="Top">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{autor}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Opaque" x="241" y="118" width="73" height="20" backcolor="#999999" uuid="1a9f190a-849f-4c2f-b3d7-f7bd0a0525be"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top"/>
				<text><![CDATA[Autor:]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="24" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="23" y="1" width="177" height="20" backcolor="#999999" uuid="7768fc7f-e093-4f12-be01-526c8a6604a5"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Titulo]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="0" y="1" width="23" height="20" backcolor="#999999" uuid="475607b9-76da-43af-9b17-e5ce85ad949b"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[No]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="200" y="1" width="83" height="20" backcolor="#999999" uuid="ad44b61e-31c5-4937-8568-23903618b7bb">
					<printWhenExpression><![CDATA[$P{cat}!="Todos"]]></printWhenExpression>
				</reportElement>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Categoria]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="283" y="1" width="100" height="20" backcolor="#999999" uuid="6a45c52f-19d9-488a-b28a-a6b5ba313a85"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Estado]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="383" y="1" width="100" height="20" backcolor="#999999" uuid="779dec94-bf1b-46ef-98d1-3bd2e78c739c"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Autor]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="483" y="1" width="100" height="20" backcolor="#999999" uuid="58e2f814-79ed-45ca-a02b-798cb7db25a5"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Nombre]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="583" y="1" width="83" height="20" backcolor="#999999" uuid="914fd2de-93be-48b2-987f-3ce679c56c55"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha Creacion]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="666" y="1" width="86" height="20" backcolor="#999999" uuid="6ec3e2af-94c5-493b-b1d7-39bd9f152788"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha Modificacion]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="24" splitType="Stretch">
			<textField>
				<reportElement x="200" y="0" width="83" height="22" uuid="a454b777-217d-4b2a-b81f-82a2c034d464"/>
				<box rightPadding="0">
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{post_type}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="283" y="0" width="100" height="22" uuid="f0490e0d-5b94-4603-a6ed-ca2e13c373af"/>
				<box rightPadding="0">
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{post_status}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="383" y="0" width="100" height="22" uuid="4bfd6913-2092-4dfe-977c-dec61d84540b"/>
				<box rightPadding="0">
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{Rol_Autor}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="483" y="0" width="100" height="22" uuid="e0b23ef3-0428-44dc-8342-4172fd4090f9"/>
				<box rightPadding="0">
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="583" y="0" width="83" height="22" uuid="35fbd1f8-0a15-4d5e-adea-600f765b74ae"/>
				<box rightPadding="0">
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{Fecha_Creacion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="666" y="0" width="86" height="22" uuid="6ac86499-bd3b-491c-b940-555a24281478"/>
				<box rightPadding="0">
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{Fecha_Modificacion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="23" y="0" width="177" height="22" uuid="2f3cec7f-8f7c-4a0c-a508-fa2d48a68a5d"/>
				<box rightPadding="0">
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{post_title}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="23" height="22" uuid="17582025-352b-4181-a099-6c1c144e0c23"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch">
			<textField>
				<reportElement x="520" y="0" width="192" height="20" uuid="b1c8c7bc-552b-4b06-903c-9caf6ebb879c"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="712" y="0" width="40" height="20" uuid="16a0519a-f8ad-4320-a513-54c74423c6a3"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="116" y="0" width="106" height="20" uuid="e58b6bef-5ad3-43b2-9fc8-08c8f67eb279"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="0" width="116" height="20" uuid="21f5160f-f145-4331-998a-2212d9e88dd0"/>
				<box>
					<pen lineWidth="1.25"/>
					<topPen lineWidth="1.25"/>
					<leftPen lineWidth="1.25"/>
					<bottomPen lineWidth="1.25"/>
					<rightPen lineWidth="1.25"/>
				</box>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total de Comunicados]]></text>
			</staticText>
		</band>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
